From f9952aacfb719aa2f1bbb198dd7bee00a72b3373 Mon Sep 17 00:00:00 2001
From: Sven Roederer <freifunk@it-solutions.geroedel.de>
Date: Tue, 10 Dec 2019 02:32:01 +0100
Subject: [PATCH] bbbdigger: use uci-default script in place of separate shell
 script

---
 addons/freifunk-berlin-bbbdigger/Makefile             | 11 +++--------
 .../uci-defaults/90-freifunk-berlin-bbbdigger.sh}     |  0
 2 files changed, 3 insertions(+), 8 deletions(-)
 rename addons/freifunk-berlin-bbbdigger/files/{postinst.sh => etc/uci-defaults/90-freifunk-berlin-bbbdigger.sh} (100%)

diff --git a/addons/freifunk-berlin-bbbdigger/Makefile b/addons/freifunk-berlin-bbbdigger/Makefile
index a173e8ce3..591a2451c 100644
--- a/addons/freifunk-berlin-bbbdigger/Makefile
+++ b/addons/freifunk-berlin-bbbdigger/Makefile
@@ -8,7 +8,7 @@
 include $(TOPDIR)/rules.mk
 
 PKG_NAME:=freifunk-berlin-bbbdigger
-PKG_VERSION:=0.0.3
+PKG_VERSION:=0.0.4
 PKG_RELEASE:=0
 
 PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)
@@ -42,13 +42,8 @@ define Build/Compile
 endef
 
 define Package/freifunk-berlin-bbbdigger/install
-	$(INSTALL_DIR) $(1)/tmp
-	$(INSTALL_BIN) ./files/postinst.sh $(1)/tmp/freifunk-berlin-bbbdigger_postinst.sh
-endef
-
-define Package/freifunk-berlin-bbbdigger/postinst
-#!/bin/sh
-$${IPKG_INSTROOT}/tmp/freifunk-berlin-bbbdigger_postinst.sh
+	$(INSTALL_DIR) $(1)/etc/uci-defaults
+	$(INSTALL_BIN) ./files/etc/uci-defaults/90-freifunk-berlin-bbbdigger.sh $(1)/etc/uci-defaults/
 endef
 
 $(eval $(call BuildPackage,freifunk-berlin-bbbdigger))
diff --git a/addons/freifunk-berlin-bbbdigger/files/postinst.sh b/addons/freifunk-berlin-bbbdigger/files/etc/uci-defaults/90-freifunk-berlin-bbbdigger.sh
similarity index 100%
rename from addons/freifunk-berlin-bbbdigger/files/postinst.sh
rename to addons/freifunk-berlin-bbbdigger/files/etc/uci-defaults/90-freifunk-berlin-bbbdigger.sh
-- 
2.20.1

